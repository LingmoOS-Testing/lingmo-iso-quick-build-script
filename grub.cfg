insmod part_gpt
insmod part_msdos
insmod fat
insmod iso9660
insmod ntfs
insmod ntfscomp
insmod exfat
insmod udf
insmod all_video
insmod font

if loadfont "${prefix}/fonts/unicode.pf2";then
    insmod gfxterm
    set gfxmode="auto"
    terminal_input console
    terminal_output gfxterm
fi

set default=lingmo
set timeout=10
set timeout_style=menu
set menuentry_class_option='--class debian --class gnu-linux --class gnu --class os'
export menuentry_class_option

menuentry "Start LingmoOS LiveCD / 启动LingmoOS LiveCD" $menuentry_class_option --id 'lingmo' {
    linux /live/vmlinuz boot=live quiet splash findiso=${iso_path} live-media='removable'
    initrd /live/initrd.img
}

menuentry "Start LingmoOS LiveCD (verbose boot) / 启动LingmoOS LiveCD (详细启动)" $menuentry_class_option --id 'lingmo_verbose' {
    linux /live/vmlinuz boot=live findiso=${iso_path} live-media='removable'
    initrd /live/initrd.img
}


menuentry "Start LingmoOS LiveCD (safe mode) / 启动LingmoOS LiveCD (安全模式)" $menuentry_class_option --id 'lingmo_safemode' {
    linux /live/vmlinuz boot=live xforcevesa nomodeset noacpi live-media='removable'
    initrd /live/initrd.img
}

menuentry "Start LingmoOS LiveCD (textonly) / 启动LingmoOS LiveCD (文字模式)" $menuentry_class_option --id 'lingmo_textonly' {
    linux /live/vmlinuz boot=live textonly live-media='removable'
    initrd /live/initrd.img
}

menuentry "Start LingmoOS LiveCD(copytoram) / 启动LingmoOS LiveCD (复制到RAM)" $menuentry_class_option --id 'lingmo_copytoram' {
    linux /live/vmlinuz boot=live toram splash findiso=${iso_path} live-media='removable'
    initrd /live/initrd.img
}

menuentry "Check LiveCD for Defects / 检查LiveCD的完整性" {
    linux /live/vmlinuz boot=live verify-checksums splash
    initrd /live/initrd.img
}

menuentry "Play Rrhar'il" {
    echo "WARNING: Tunes will be played on the PC speaker at full volume."
    echo "Press Enter to continue."
    read
    insmod play
    play 18240 0 576 55 12 55 12 55 12 110 12 110 12 55 12 110 12 110 12 110 12 110 12 55 12 55 12 55 12 110 12 110 12 55 12 110 48 880 48 1047 48 988 48 1175 48 1047 48 988 48 880 48 1047 48 880 48 831 48 880 48 988 48 831 48 740 48 831 48 880 48 880 48 1047 48 988 48 1175 48 1047 48 1319 48 1175 48 1175 48 1397 48 1319 48 1175 48 1319 48 1760 48 1661 48 1319 48 330 48 880 48 1047 48 988 48 1175 48 1047 48 988 48 880 48 1047 48 880 24 110 24 1175 48 988 48 1109 24 110 24 1175 48 1319 24 55 12 1319 12 880 48 1397 48 1319 24 55 24 1175 48 1397 48 1480 24 988 24 1245 24 988 24 740 24 622 24 440 24 740 24 1760 384 208 9 494 6 831 369 55 120 262 24 330 24 440 24 330 24 220 24 262 24 330 24 440 24 523 24 659 24 831 24 880 48 55 48 110 48 55 48 55 72 165 24 110 48 165 24 55 24 165 48 55 48 165 24 175 24 55 24 165 24 55 24 165 24 165 24 55 24 165 48 220 12 220 12 220 12 220 12 330 5 165 2 330 5 165 7 330 5 165 12 330 12 55 5 165 2 55 5 165 7 55 5 165 12 55 12 330 43 110 5 55 24 165 19 55 5 165 5 55 4 165 5 165 5 55 29 831 4 165 1 831 4 165 5 165 5 831 5 55 6 165 6 165 6 165 6 110 6 165 6 165 6 165 6 110 24 55 48 831 48 55 48 110 36 440 12 55 12 440 12 55 12 440 12 55 48 55 24 110 24 440 24 523 24 659 24 831 24 659 48 165 43 55 5 880 24 659 24 880 24 165 19 55 5 55 6 165 6 165 6 165 6 165 6 165 6 932 12 698 24 55 6 165 6 165 6 165 6 659 24 659 24 659 24 165 18 55 6 659 24 55 24 659 24 55 24 466 24 175 24 587 24 165 18 55 6 523 24 165 18 55 6 440 24 659 24 880 24 988 24 1047 24 1319 24 466 5 165 2 466 5 165 7 466 5 1175 24 58 5 165 2 58 5 165 7 58 5 698 24 1865 24 1397 24 1175 24 932 24 58 4 165 1 58 4 165 5 165 5 58 5 1175 24 165 5 932 4 165 5 165 5 932 5 58 6 165 6 165 6 165 6 117 6 165 6 165 6 165 6 587 24 698 24 932 24 1175 24 932 24 698 24 587 24 988 24 1661 24 1319 24 1661 24 2093 24 1976 24 1661 24 988 24 2093 24 2093 24 1319 24 1175 24 220 48 55 48 110 48 55 48 440 24 165 12 55 36 165 24 831 24 55 24 165 24 55 24 523 24 880 24 440 24 494 24 523 24 659 24 587 24 698 24 659 24 440 24 880 24 440 24 698 24 440 24 831 12 220 12 440 12 220 12 330 5 165 2 330 5 165 7 330 5 523 24 165 7 55 5 165 7 55 5 523 24 1047 24 523 24 494 24 523 24 165 5 55 4 165 5 165 5 55 5 523 24 165 5 1175 4 165 5 165 5 1175 5 165 6 165 6 165 6 165 6 165 6 165 6 165 6 165 6 523 24 1319 24 523 24 1760 24 1319 24 1047 24 880 24 1319 24 1047 12 440 12 880 12 440 12 659 12 440 12 82 12 104 12 110 12 131 12 165 12 208 12 220 12 262 12 330 12 415 12 440 12 523 12 659 12 831 12 880 12 988 12 880 24 659 24 1047 24 988 24 1047 24 659 24 880 24 659 24 440 6 165 6 165 6 165 6 165 6 165 6 1047 12 988 24 440 6 165 6 165 6 165 6 988 24 659 24 880 24 659 24 523 24 587 24 659 24 440 24 587 24 698 24 523 24 494 24 440 24 330 24 392 24 330 24 110 24 55 24 55 24 220 24 440 48 0 24 415 48 0 24 440 48 523 48 0 24 659 48 0 24 831 48 880 96 988 96 880 24 52 8 659 24 52 8 587 24 52 8 523 24 52 8 494 24 52 8 415 24 52 8 330 48 55 48 1760 24 1047 24 1661 24 1047 24 1760 24 1047 24 880 24 659 24 1319 24 880 24 659 24 523 24 1397 24 466 24 587 24 698 24 1865 24 932 24 1760 24 932 24 1865 24 932 24 1397 24 932 24 1175 24 932 24 698 24 466 24 1319 24 659 24 988 24 831 24 659 24 494 24 1319 24 988 24 1661 24 988 24 1319 24 988 24 1661 24 988 24 1976 24 988 24 1760 24 880 24 659 24 523 24 1319 24 880 24 659 24 523 24 1047 24 880 24 659 24 523 24 440 24 659 24 1319 24 1760 24 440 24 659 24 1319 24 1047 24 1760 24 1047 24 1661 24 1047 24 1760 24 1047 24 880 24 659 24 1319 24 880 24 659 24 523 24 1480 24 494 24 622 24 740 24 1976 24 988 24 1760 24 988 24 1976 24 988 24 1245 24 988 24 1480 24 622 24 740 24 494 24 2349 24 988 24 1480 24 1976 24 1480 24 988 24 2093 24 1480 24 1976 24 831 24 659 24 587 24 1976 24 1480 24 988 24 831 24 1760 24 880 24 1047 24 659 24 1319 24 880 24 1047 24 1319 24 1760 24 1319 24 1760 24 2093 24 1319 24 1760 24 2093 24 2637 24 880 24 659 24 1047 24 988 24 1047 24 659 24 1319 24 659 24 1397 24 1319 24 1175 24 1397 24 880 24 1319 24 1175 24 1760 24 1865 24 932 24 1397 24 932 24 1175 24 1319 24 1397 24 1760 24 1865 24 932 24 2093 24 932 24 1865 24 932 24 1760 24 932 24 1661 24 831 24 988 24 1319 24 1661 24 1319 24 1661 24 1976 24 494 24 659 24 831 24 988 24 1319 24 1661 24 1760 24 1976 24 2093 24 1047 24 1760 24 880 24 1319 24 659 24 1760 24 880 24 2349 24 1175 24 2093 24 1047 24 1976 24 988 24 1760 24 880 24 110 48 2637 24 2349 24 2637 24 110 24 2093 24 55 24 1976 24 55 24 1661 24 1760 24 1976 24 2093 24 1976 24 1760 24 1976 24 1245 24 1480 24 1976 24 1760 24 1661 24 1760 24 1976 24 988 24 740 24 988 24 1245 24 1976 24 988 24 1480 24 2349 24 2637 24 1319 24 1661 24 988 24 1175 24 831 24 659 24 494 24 587 24 659 24 831 24 988 24 587 24 659 24 52 24 988 24 880 48 55 24 55 24 880 24 55 24 740 24 880 24 880 24 55 24 55 24 55 24 880 24 1047 24 55 24 55 24 880 48 262 84 0 12 880 48 55 36 0 12 1047 24 988 24 880 48 831 48 0 48 988 12 0 12 988 48 123 12 0 12 831 48 330 12 0 12 831 12 0 12 880 12 0 12 988 12 0 12 1047 36 0 12 1047 36 0 12 1109 36 0 12 1109 60 0 12 932 36 0 12 1109 24 1319 24 82 12 0 12 1109 12 0 12 1175 12 82 12 1319 12 0 12 1175 12 0 12 1109 12 0 12 1319 12 0 12 1175 60 0 12 1175 24 831 24 294 12 0 12 988 36 0 12 1047 60 0 12 1175 60 0 12 1319 48 0 96 1397 84 0 12 1397 24 1397 24 62 12 0 12 1175 24 123 36 0 12 1397 48 1319 24 131 12 0 12 1319 24 1319 24 1175 24 440 12 0 12 1175 84 0 12 1047 24 131 12 0 12 1319 24 1319 24 1319 48 1245 60 0 12 988 60 0 12 988 48 1760 24 1760 60 0 12 1480 36 0 12 1480 24 1480 24 1760 192 1661 192 1047 48 523 48 494 48 523 48 1047 48 523 48 494 48 523 48 988 48 494 48 831 48 52 48 880 48 494 48 988 48 494 48 1047 48 466 48 784 48 49 24 49 24 1109 48 69 48 1319 48 330 48 1397 48 294 48 220 48 1319 48 1175 96 698 48 784 48 880 48 294 48 698 48 294 48 988 48 392 48 587 48 247 48 1047 48 196 48 659 48 65 48 880 48 220 48 831 48 880 48 988 144 62 24 62 24 62 48 62 48 62 96 880 192 831 192 880 768 277 768 220 12 0 12 220 12 0 12 220 24 0 24 220 12 0 12 220 24 0 24 220 12 0 12 220 24 0 24 220 12 0 12 220 12 0 12 220 12 0 12 220 12 0 12 220 12 0 12 220 12 0 12 110 432 117 48 123 48 131 48 139 48 147 48 156 48 165 48 175 48 185 48 196 48 208 48 220 24 233 24 247 24 262 24 277 24 294 24 311 24 330 24 880 48 55 48 110 48 880 24 988 24 1047 48 880 24 1047 24 988 48 831 24 880 24 988 48 52 48 104 48 988 24 1047 24 1175 24 1047 24 988 24 880 24 880 24 831 24 880 24 988 24 1109 48 659 24 1109 24 1319 24 659 24 880 24 1109 24 880 24 1109 24 1319 24 880 24 659 24 1109 24 1319 24 1760 24 1568 48 37 48 73 48 1760 24 1568 24 1397 72 37 24 1175 48 1319 48 1397 48 44 48 87 48 1319 24 1397 24 1568 48 698 12 784 12 1397 24 1319 48 1175 48 1047 48 988 24 1047 24 1175 48 1047 24 1175 24 1319 48 49 24 880 24 98 48 1047 48 988 48 988 48 62 48 740 24 988 24 1245 24 988 24 1245 24 1480 24 1245 24 1480 24 1245 24 2489 24 1976 24 1661 24 1319 24 988 24 831 24 988 24 1319 24 831 24 1319 24 659 24 52 12 52 12 52 12 52 12 1319 24 831 24 52 12 52 12 52 12 52 12 880 96 110 48 1047 24 1175 24 1047 48 1175 48 880 48 1319 48 1175 96 87 48 1397 24 1319 24 880 96 87 48 784 24 880 24 988 96 98 48 988 24 1047 24 988 48 1175 48 587 12 784 12 1397 24 988 24 1175 24 1397 96 131 48 1568 24 1397 24 1319 96 277 24 659 24 880 24 1109 24 880 48 698 24 880 24 1175 24 880 24 1175 24 1397 24 1175 24 1397 24 1760 24 1397 24 880 24 1109 24 1175 24 1397 24 1245 24 1245 24 988 24 1245 24 1480 24 1245 24 1480 24 1661 24 1760 24 1480 24 1245 24 1480 24 1245 24 1480 24 1661 24 1760 24 1976 48 1976 48 330 48 1661 48 1661 48 330 48 1976 48 1976 48 1661 48 330 24 1661 48 52 12 330 12 1661 48 104 24 52 24 52 24 52 24 52 24 52 24 52 24 52 24 880 48 440 24 1047 24 110 24 440 24 1319 48 440 48 1319 48 1397 24 1319 24 1175 24 1319 24 1397 48 698 24 1397 24 87 24 698 24 880 48 587 24 698 24 1175 24 698 24 1047 24 698 24 587 24 440 24 988 48 392 24 988 24 98 24 392 24 1568 24 988 24 392 24 587 24 988 24 587 24 1397 48 1397 48 1397 48 659 24 1397 24 131 48 1319 24 1568 24 1568 48 523 24 1760 24 131 48 1568 48 1397 48 698 24 880 24 87 24 698 24 1397 48 698 24 880 24 1319 48 880 24 698 24 1047 24 698 24 1175 48 494 24 698 24 880 48 1175 24 698 24 988 24 494 24 880 24 831 24 880 24 1245 24 1397 24 1480 24 1661 48 659 24 1319 24 41 24 659 24 1319 24 659 24 1661 48 659 24 1976 24 82 24 659 24 1760 24 659 24 1661 24 1319 24 988 24 831 24 1319 24 988 24 831 24 659 24 208 12 247 12 330 12 415 12 247 12 330 12 415 12 494 12 330 12 415 12 494 12 659 12 415 12 494 12 52 12 831 12 880 48 440 24 1047 24 110 24 440 24 1319 48 440 48 1319 48 1397 24 1319 24 1175 24 1319 24 1397 48 698 24 1397 24 87 24 698 24 880 48 587 24 698 24 1175 24 698 24 1047 24 698 24 587 24 440 24 988 48 392 24 988 24 98 24 392 24 1568 24 988 24 392 24 587 24 988 24 587 24 1397 48 1397 48 1397 48 659 24 1397 48 659 24 1319 24 1568 24 1760 24 554 8 1319 24 554 8 1319 24 277 8 1109 24 277 8 1109 24 277 8 1760 24 277 8 2349 48 1397 24 1175 24 880 48 1175 48 1397 24 1175 24 1397 24 1760 24 1760 24 1397 24 1760 24 1976 24 2489 24 1976 24 1480 24 1245 24 2960 24 2489 24 1976 24 1480 24 622 24 740 24 880 24 988 24 220 12 247 12 311 12 370 12 440 12 494 12 622 12 740 12 1760 24 1976 24 880 16 988 8 82 8 880 16 988 16 880 16 988 16 41 16 988 16 880 16 988 16 880 8 82 8 988 16 880 16 988 16 880 16 82 16 880 8 41 8 988 16 1760 48 1661 24 1319 24 988 24 831 24 1319 24 988 24 831 24 659 24 208 12 247 12 330 12 415 12 247 12 330 12 415 12 494 12 330 12 415 12 494 12 659 12 415 12 494 12 659 12 831 12 1760 768 220 768 440 5 880 1536
}

menuentry "Shutdown / 关机" {
    halt
}

menuentry "Reboot / 重启" {
    reboot
}

if [ "$grub_platform" = "efi" ]; then
        fwsetup --is-supported
        if [ "$?" = 0 ]; then
                menuentry 'UEFI Firmware Settings / UEFI固件设置' --id 'uefi-firmware' {
                        fwsetup
                }
        fi
fi

menuentry "Continue to boot from the next device / 继续从下一个设备启动" {
    exit
}
